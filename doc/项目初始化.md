# 项目初始化
项目初始化介绍，包含maven，ssm框架，web工程和相关插件的初始化

## 1. maven配置
参考[pom.xml](./../pom.xml)

包含项目所依赖的jar包和插件

主要说明下插件配置 

### 1) mybatis-generator插件

需要在resource根目录下创建[generatorConfig.xml](./../src/main/resources/generatorConfig.xml)文件

具体配置可以查看行内注释

点击idea中maven标签Plugins/mybatis-generator会自动生成[cn.geliang.mmall.dao](./../src/main/java/cn/geliang/mmall/dao)
中的接口和[mappers](./../src/main/resources/mappers)中的xml文件

根据业务逻辑修改相关的sql语句，本例中利用MySql自带的now()函数更新时间

### 2) maven-compiler-plugin插件

将指定目录的jar包编译并作为项目依赖（本项目中支付宝的面对面demo jar包不在maven的中央仓库）

## 2. web工程初始化
详见[web.xml](./../src/main/webapp/WEB-INF/web.xml)中的行内注释

主要包括

### 1) SpringMVC编码拦截器：强制utf-8编码


### 2) 两个监听器
org.springframework.web.context.request.RequestContextListener, 

org.springframework.web.context.ContextLoaderListener，

将Spring与web容器紧密结合

**(1) spring配置文件[applicationContext.xml](./../src/main/resources/applicationContext.xml)**

    - 注册组件扫描器
    - 通过扫描找到@Aspect 定义的切面类
    - 引入数据源配置
    
**(2) 数据源配置文件[applicationContext-datasource.xml](./../src/main/resources/applicationContext-datasource.xml)** 
    
    - 注册组件扫描器
    - 注册datasource.properties配置文件
    - dbcp2数据库连接池配置
    - mybatis SqlSessionFactoryBean
        - Mybatis PageHelper分页插件拦截器
    - mybatis-spring MapperScannerConfigurer mapper接口扫描bean
    - 事务管理 DataSourceTransactionManager 注册    

### 3) Spring MVC中央调度器：org.springframework.web.servlet.DispatcherServlet
配置文件[dispatcher-servlet.xml](./../src/main/resources/dispatcher-servlet.xml)

    - 组件扫描
    - 注册MVC注解驱动
        - StringHttpMessageConverter： 字符串消息转换器，配合ResponseBody，将String插入到body区
        - MappingJackson2HttpMessageConverter： json消息转换器，配合ResponseBody，将jackson格式化的对象插入到body区
    - Spring MVC文件上传


